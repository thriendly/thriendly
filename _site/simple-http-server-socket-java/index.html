<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="icon" href="/assets/images/logo.png">


    <!-- Begin Jekyll SEO tag v2.6.1 -->
<meta name="generator" content="Jekyll v4.0.0" />
<meta property="og:title" content="Simple HTTP Server in Java with single and multiple clients - Socket programming" />
<meta name="author" content="Pramod" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Introduction" />
<meta property="og:description" content="Introduction" />
<link rel="canonical" href="http://localhost:4000/simple-http-server-socket-java/" />
<meta property="og:url" content="http://localhost:4000/simple-http-server-socket-java/" />
<meta property="og:site_name" content="Tip Season - Tech &amp; Interview Tips" />
<meta property="og:image" content="http://localhost:4000/assets/images/golang.jpg" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2024-02-04T00:00:00-08:00" />
<script type="application/ld+json">
{"description":"Introduction","headline":"Simple HTTP Server in Java with single and multiple clients - Socket programming","datePublished":"2024-02-04T00:00:00-08:00","dateModified":"2024-02-04T00:00:00-08:00","@type":"BlogPosting","image":"http://localhost:4000/assets/images/golang.jpg","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/simple-http-server-socket-java/"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://localhost:4000/assets/images/TipSeasonLogo.jpeg"},"name":"Pramod"},"url":"http://localhost:4000/simple-http-server-socket-java/","author":{"@type":"Person","name":"Pramod"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <title>Simple HTTP Server in Java with single and multiple clients - Socket programming</title>


    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
          integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">

    <link href="/assets/css/screen.css" rel="stylesheet">

    <link href="/assets/css/main.css" rel="stylesheet">
    <link href="/assets/css/custom.css" rel="stylesheet">


    <link href="https://fonts.googleapis.com/icon?family=Material+Icons"
          rel="stylesheet">

    <script src="/assets/js/jquery.min.js"></script>

    

    <!--    MailChimp Addon-->
    <script id="mcjs">!function(c,h,i,m,p){m=c.createElement(h),p=c.getElementsByTagName(h)[0],m.async=1,m.src=i,p.parentNode.insertBefore(m,p)}(document,"script","https://chimpstatic.com/mcjs-connected/js/users/13f41df6125800abe7efbd891/750d0895c842aca8ef9984840.js");</script>
    <!--    End of MailChimp Addon-->

</head>


<body class="layout-post">
<!-- defer loading of font and font awesome -->
<noscript id="deferred-styles">
    <link href="https://fonts.googleapis.com/css?family=Righteous%7CMerriweather:300,300i,400,400i,700,700i"
          rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css"
          integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
</noscript>


<!-- Begin Menu Navigation
================================================== -->
<nav class="navbar navbar-expand-lg navbar-light bg-banner fixed-top mediumnavigation nav-down">

    <div class="container pr-0">

        <!-- Begin Logo -->
        <a class="navbar-brand" href="/">
            <!--    <img src="/assets/images/TipSeasonLogo.jpeg" alt="Tip Season">-->
            <i class="material-icons">scatter_plot</i> TipSeason
        </a>
        <!-- End Logo -->

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarMediumish"
                aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarMediumish">

            <!-- Begin Menu -->

            <ul class="navbar-nav ml-auto">

                

                <li class="nav-item">
                    
                    <a class="nav-link" href="/index.html">Home</a>
                </li>

                <li class="nav-item">
                    <a target="_blank" class="nav-link" href="https://tipseason.etsy.com/">Shop </a>
                </li>

            
                <li class="nav-item">
                    <a class="nav-link" href="/ai-tools">AI Tools <sup class="text-danger">New</sup></a>
                </li>


                

                <li class="nav-item">
                    
                    <a class="nav-link" href="/coding-interviews.html">Interviews</a>
                </li>

                

                <li class="nav-item dropdown">
                    

                    <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#"
                       role="button"
                       aria-haspopup="true" aria-expanded="false">
                        Tools
                    </a>
                    <div class="dropdown-menu">
                        <a class="dropdown-item" href="/ai-tools">All Tools</a>
                        <hr>
                        <a class="dropdown-item" href="/reading-time-calculator">Reading Time Calculator</a>
                        <hr>
                        <a class="dropdown-item" href="/time-difference-calculator">Time difference Calculator</a>
                        <hr>
                        <a class="dropdown-item" href="/dalle-prompt-generator">Dalle Prompt Generator</a>
                        <hr>
                        <a class="dropdown-item" href="/leonardo-prompt-generator">Leonardo Prompt Generator</a>
                        <hr>
                        <a class="dropdown-item" href="/ai-prompt-generator">AI Art Prompt Generator</a>
                        <hr>
                        <a class="dropdown-item" href="/gemini-prompt-generator">Gemini Prompt Generator<a>
                        <hr>
                        <a class="dropdown-item" href="/adobe-firefly-prompt-generator">Adobe firefly Prompt Generator<a>
                        <hr>
                        <a class="dropdown-item" href="/inr-crore-usd-converter">INR crore to USD converter</a>
                    </div>

                </li>


                

                <li class="nav-item">
                    
                    <a class="nav-link" href="/tips/tech/1-How-to-send-uncompressed-images-on-WhatsApp">Tips</a>
                </li>

                

                <li class="nav-item dropdown">
                    

                    <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#"
                       role="button"
                       aria-haspopup="true" aria-expanded="false">
                        Categories
                    </a>
                    <div class="dropdown-menu">
                        <a class="dropdown-item" href="/categories">All Categories</a>
                        <a class="dropdown-item" href="/carbon-language.html">Carbon Language</a>
                        
                        <a class="dropdown-item" href="/categories#Interviews">Interviews</a>
                        
                        <a class="dropdown-item" href="/categories#Java">Java</a>
                        
                        <a class="dropdown-item" href="/categories#Markdown">Markdown</a>
                        
                        <a class="dropdown-item" href="/categories#Database">Database</a>
                        
                        <a class="dropdown-item" href="/categories#MySQL">MySQL</a>
                        
                        <a class="dropdown-item" href="/categories#PostgreSQL">PostgreSQL</a>
                        
                        <a class="dropdown-item" href="/categories#DataScience">DataScience</a>
                        
                        <a class="dropdown-item" href="/categories#Carbon">Carbon</a>
                        
                        <a class="dropdown-item" href="/categories#Programming">Programming</a>
                        
                        <a class="dropdown-item" href="/categories#Events">Events</a>
                        
                        <a class="dropdown-item" href="/categories#Behavioral">Behavioral</a>
                        
                        <a class="dropdown-item" href="/categories#Resume">Resume</a>
                        
                        <a class="dropdown-item" href="/categories#Golang">Golang</a>
                        
                        <a class="dropdown-item" href="/categories#ChatGPT">ChatGPT</a>
                        
                        <a class="dropdown-item" href="/categories#Midjourney">Midjourney</a>
                        
                        <a class="dropdown-item" href="/categories#Writing">Writing</a>
                        
                        <a class="dropdown-item" href="/categories#BardAI">BardAI</a>
                        
                        <a class="dropdown-item" href="/categories#Gemini">Gemini</a>
                        
                        <a class="dropdown-item" href="/categories#DALLE-2">DALLE-2</a>
                        
                        <a class="dropdown-item" href="/categories#SQL">SQL</a>
                        
                        <a class="dropdown-item" href="/categories#Software Engineer">Software Engineer</a>
                        
                    </div>
                </li>

                <li class="nav-item">
                    <a class="nav-link" href="https://us8.list-manage.com/contact-form?u=13f41df6125800abe7efbd891&form_id=bfba3f28362a84ec99ce783c427eb5a7" rel="nofollow">Contact Us</a>
                </li>

                <script src="/assets/js/lunr.js"></script>


<style>
    .lunrsearchresult .title {color: #d9230f;}
    .lunrsearchresult .url {color: silver;}
    .lunrsearchresult a {display: block; color: #777;}
    .lunrsearchresult a:hover, .lunrsearchresult a:focus {text-decoration: none;}
    .lunrsearchresult a:hover .title {text-decoration: underline;}
</style>


<form class="bd-search" onSubmit="return lunr_search(document.getElementById('lunrsearch').value);">
    <input type="text" class="form-control text-small launch-modal-search" id="lunrsearch" name="q" maxlength="255" value="" placeholder="Type and enter to Search"/>
</form>

<div id="lunrsearchresults">
    <ul></ul>
</div>

<script src="/assets/js/lunrsearchengine.js"></script>

            </ul>

            <!-- End Menu -->

        </div>

    </div>
</nav>
<!-- End Navigation
================================================== -->

<div class="site-content">

    <div class="container">

        <!-- Site Title
        ================================================== -->
        <!--<div class="mainheading">-->
        <!--    <h1 class="sitetitle">Tip Season</h1>-->
        <!--    <p class="lead">-->
        <!--        Tip Season - Tech & Coding Interview Tips and Tricks-->
        <!--    </p>-->
        <!--</div>-->

        <!-- Content
        ================================================== -->
        <div class="main-content">
            <!-- Begin Article
================================================== -->
<div class="container">
    <div class="row">

        <!-- Post Share -->
        <div class="col-md-2 pl-0">
            <div class="share sticky-top sticky-top-offset">
    <p>
        Share
    </p>
    <ul>
        <li class="ml-1 mr-1">
            <a target="_blank" href="https://twitter.com/intent/tweet?text=Simple HTTP Server in Java with single and multiple clients - Socket programming&url=http://localhost:4000/simple-http-server-socket-java/" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                <i class="fab fa-twitter"></i>
            </a>
        </li>

        <li class="ml-1 mr-1">
            <a target="_blank" href="https://facebook.com/sharer.php?u=http://localhost:4000/simple-http-server-socket-java/" onclick="window.open(this.href, 'facebook-share', 'width=550,height=435');return false;">
                <i class="fab fa-facebook-f"></i>
            </a>
        </li>

        <li class="ml-1 mr-1">
            <a target="_blank" href="https://www.linkedin.com/shareArticle?mini=true&url=http://localhost:4000/simple-http-server-socket-java/" onclick="window.open(this.href, 'width=550,height=435');return false;">
                <i class="fab fa-linkedin-in"></i>
            </a>
        </li>

    </ul>
    
    <div class="sep">
    </div>
    <ul>
        <li>
        <a class="small smoothscroll" href="#disqus_thread"></a>
        </li>
    </ul>
    
</div>

        </div>

        <!-- Post -->
        

        <div class="col-md-9 flex-first flex-md-unordered">
            <div class="mainheading">


                <!-- Post Title -->
                <h1 class="posttitle">Simple HTTP Server in Java with single and multiple clients - Socket programming</h1>

                <!-- Author Box -->
                
                <div class="row post-top-meta">
                    <div class="col-xs-12 col-md-3 col-lg-2 text-center text-md-left mb-4 mb-md-0">
                        
                        <img class="author-thumb" src="/assets/images/avatar.png" alt="Mani">
                        
                    </div>
                    <div class="col-xs-12 col-md-9 col-lg-10 text-center text-md-left">
                        <a target="_blank" class="link-dark" href="https://www.instagram.com/thetipseason/">Mani</a><a target="_blank" href="https://twitter.com/thetipseason" class="btn follow">Follow</a>
                        <div class="author-description">Educating everyone with the beauty of programming!!</div>
                    </div>
                </div>
                


            </div>

            <!-- Adsense if enabled from _config.yml (change your pub id and slot) -->
            
            <!-- End Adsense -->

            <!-- Post Featured Image -->
            

            
            <img class="featured-image img-fluid" src="/assets/images/golang.jpg" alt="Simple HTTP Server in Java with single and multiple clients - Socket programming">
            

            
            <!-- End Featured Image -->

            <!-- Post Content -->
            <div class="article-post">
                <!-- Toc if any -->
                
                    
                        <p><em>Build your own HTTP server in Java, mastering client requests, multi-threading, and more. Dive into a hands-on journey to demystify the web from the server side!</em></p>
                    
                    
                        <div class="alert alert-success" role="alert">
                            <span class="text"><i class="material-icons">star</i> Table of Contents:</span>
                            <ul id="my_toc" class="inline_toc">
  <li class="toc_items"><a href="#introduction">Introduction</a></li>
  <li class="toc_items"><a href="#understanding-http">Understanding HTTP</a></li>
  <li class="toc_items"><a href="#code-walkthrough">Code Walkthrough</a>
    <ul>
      <li class="toc_items"><a href="#1-server-socket-setup">1. Server Socket Setup</a></li>
      <li class="toc_items"><a href="#2-processing-client-requests">2. Processing Client Requests</a></li>
      <li class="toc_items"><a href="#3-parsing-headers-and-building-response">3. Parsing Headers and Building Response</a></li>
      <li class="toc_items"><a href="#4-serve-static-files-with-socket-programming">4. Serve static files with socket programming</a></li>
      <li class="toc_items"><a href="#5-error-handling-and-enhancements">5. Error Handling and Enhancements</a></li>
    </ul>
  </li>
  <li class="toc_items"><a href="#full-code-for-simple-http-web-server-in-java-with-socket-programming">Full code for Simple HTTP Web Server in Java with socket programming:</a></li>
  <li class="toc_items"><a href="#simple-http-server-with-multiple-clients-in-java-socket-programming">Simple Http server with multiple clients in Java socket programming</a>
    <ul>
      <li class="toc_items"><a href="#single-client">Single-Client:</a></li>
      <li class="toc_items"><a href="#multi-client-with-threads">Multi-Client (with threads):</a></li>
      <li class="toc_items"><a href="#key-differences-in-code">Key Differences in Code:</a></li>
    </ul>
  </li>
  <li class="toc_items"><a href="#heres-a-guide-on-running-the-code-and-connecting-a-client">Here’s a guide on running the code and connecting a client</a>
    <ul>
      <li class="toc_items"><a href="#1-compile-the-code">1. Compile the Code:</a></li>
      <li class="toc_items"><a href="#2-run-the-server">2. Run the Server:</a></li>
      <li class="toc_items"><a href="#3-connect-a-client">3. Connect a Client:</a></li>
      <li class="toc_items"><a href="#benefits-of-multi-client">Benefits of Multi-Client:</a></li>
      <li class="toc_items"><a href="#things-to-remember">Things to Remember:</a></li>
    </ul>
  </li>
  <li class="toc_items"><a href="#conclusion">Conclusion</a></li>
</ul>
                        </div>
                    

<!--                    <div class="toc mt-4 mb-4 lead">-->
<!--                        <h3 class="font-weight-bold">Summary</h3>-->
<!--                        <ul>
  <li><a href="#introduction">Introduction</a></li>
  <li><a href="#understanding-http">Understanding HTTP</a></li>
  <li><a href="#code-walkthrough">Code Walkthrough</a>
    <ul>
      <li><a href="#1-server-socket-setup">1. Server Socket Setup</a></li>
      <li><a href="#2-processing-client-requests">2. Processing Client Requests</a></li>
      <li><a href="#3-parsing-headers-and-building-response">3. Parsing Headers and Building Response</a></li>
      <li><a href="#4-serve-static-files-with-socket-programming">4. Serve static files with socket programming</a></li>
      <li><a href="#5-error-handling-and-enhancements">5. Error Handling and Enhancements</a></li>
    </ul>
  </li>
  <li><a href="#full-code-for-simple-http-web-server-in-java-with-socket-programming">Full code for Simple HTTP Web Server in Java with socket programming:</a></li>
  <li><a href="#simple-http-server-with-multiple-clients-in-java-socket-programming">Simple Http server with multiple clients in Java socket programming</a>
    <ul>
      <li><a href="#single-client">Single-Client:</a></li>
      <li><a href="#multi-client-with-threads">Multi-Client (with threads):</a></li>
      <li><a href="#key-differences-in-code">Key Differences in Code:</a></li>
    </ul>
  </li>
  <li><a href="#heres-a-guide-on-running-the-code-and-connecting-a-client">Here’s a guide on running the code and connecting a client</a>
    <ul>
      <li><a href="#1-compile-the-code">1. Compile the Code:</a></li>
      <li><a href="#2-run-the-server">2. Run the Server:</a></li>
      <li><a href="#3-connect-a-client">3. Connect a Client:</a>
        <ul>
          <li><a href="#option-1-connect-with-web-browser">Option 1: Connect with web browser:</a></li>
          <li><a href="#option-2-connect-with-simple-http-java-client">Option 2: Connect with Simple HTTP Java Client</a></li>
        </ul>
      </li>
      <li><a href="#benefits-of-multi-client">Benefits of Multi-Client:</a></li>
      <li><a href="#things-to-remember">Things to Remember:</a></li>
    </ul>
  </li>
  <li><a href="#conclusion">Conclusion</a></li>
</ul>-->
<!--                    </div>-->
                
                <!-- End Toc -->
                <h2 id="introduction">Introduction</h2>

<p>Hello, curious developers!
Ever wondered how websites magically appear on your screen? Behind the scenes,
HTTP servers and clients play crucial roles in delivering the content you enjoy,
working in harmonious coordination. Today, we’ll embark on an exciting journey
to build our very own HTTP web server using the power of Java’s socket programming.
Buckle up, as we’re about to demystify the inner workings of the web and gain
valuable insights into its core technologies.</p>

<p>In case you missed it check out our other programming articles here</p>

<p><a href="/how-to-read-file-as-string-in-java/">Java read file to string - 5 simple ways</a></p>

<p><a href="/how-to-read-file-as-string-in-java/">How to read or convert an inputstream into a string in java</a></p>

<p><a href="/how-to-read-file-line-by-line-golang/">Golang read file line by line - 3 Simple ways</a></p>

<p><a href="/how-to-get-last-element-of-slice-golang/">Golang get last element of slice / array / list - Simple and fast</a></p>

<p><a href="/how-to-get-keys-in-map-golang/">Golang get map keys - 3 Simple ways</a></p>

<p><a href="/golang-enums/">Golang enums implementation with examples</a></p>

<h2 id="understanding-http">Understanding HTTP</h2>

<p>Before we delve into the code, let’s gain a basic understanding of the Hypertext Transfer Protocol (HTTP). It’s the language servers and clients use to converse. Here’s a simplified breakdown:</p>

<ul>
  <li><strong>Requests:</strong> Clients initiate communication by sending requests to the server, specifying the desired resource (e.g., an HTML page) using a URL and potentially including additional data.</li>
  <li><strong>Responses:</strong> Servers respond with their interpretation of the request, sending back data (e.g., the HTML page) wrapped in an HTTP response message.</li>
</ul>

<h2 id="code-walkthrough">Code Walkthrough</h2>

<p>Now, let’s dive into the code for simple http server code.</p>

<h3 id="1-server-socket-setup">1. Server Socket Setup</h3>

<p>The foundation of our HTTP server lies in its ability to listen for and accept
client connections. In this section, we’ll explore the Java code responsible for
establishing this communication channel. Imagine a bustling marketplace where
shops wait for customers to arrive. Similarly, our HTTP server needs a mechanism
to connect with web browsers (clients) who request information. This section
delves into the Java code responsible for establishing this crucial
communication channel, the cornerstone of our server’s functionality.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
</pre></td><td class="rouge-code"><pre><span class="kn">import</span> <span class="nn">java.io.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.*</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SimpleHTTPServer</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="no">PORT</span> <span class="o">=</span> <span class="mi">8080</span><span class="o">;</span> <span class="c1">// Arbitrary port number (use one not in use)</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">IOException</span> <span class="o">{</span>
        <span class="nc">ServerSocket</span> <span class="n">serverSocket</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ServerSocket</span><span class="o">(</span><span class="no">PORT</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Server started on port "</span> <span class="o">+</span> <span class="no">PORT</span><span class="o">);</span>

        <span class="k">while</span> <span class="o">(</span><span class="kc">true</span><span class="o">)</span> <span class="o">{</span>
            <span class="nc">Socket</span> <span class="n">clientSocket</span> <span class="o">=</span> <span class="n">serverSocket</span><span class="o">.</span><span class="na">accept</span><span class="o">();</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Client connected: "</span> <span class="o">+</span> <span class="n">clientSocket</span><span class="o">.</span><span class="na">getInetAddress</span><span class="o">());</span>
            <span class="n">handleClient</span><span class="o">(</span><span class="n">clientSocket</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">handleClient</span><span class="o">(</span><span class="nc">Socket</span> <span class="n">clientSocket</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">IOException</span> <span class="o">{</span>
        <span class="c1">// ... more code to handle client requests</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<ul>
  <li><strong><code class="highlighter-rouge">ServerSocket</code></strong>: Creates a socket on the specified <code class="highlighter-rouge">PORT</code>, ready to accept client connections.</li>
  <li><strong><code class="highlighter-rouge">PORT</code></strong>: This can be any available port (avoid the well-known ones like 80).</li>
  <li><strong><code class="highlighter-rouge">serverSocket.accept()</code></strong>: Waits for a client connection and returns a <code class="highlighter-rouge">Socket</code> object representing the active connection.</li>
  <li><strong><code class="highlighter-rouge">while</code> loop</strong>: Keeps the server running, accepting new connections indefinitely.</li>
  <li><strong><code class="highlighter-rouge">handleClient</code></strong>: A helper method we’ll define later to handle each client’s request-response cycle.</li>
</ul>

<h3 id="2-processing-client-requests">2. Processing Client Requests</h3>

<p>Now that our server is listening for connections, let’s delve into how it handles incoming client requests. Here’s a breakdown of the code responsible for this interaction:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="kd">private</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">handleClient</span><span class="o">(</span><span class="nc">Socket</span> <span class="n">clientSocket</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">IOException</span> <span class="o">{</span>
    <span class="nc">BufferedReader</span> <span class="n">reader</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="nc">InputStreamReader</span><span class="o">(</span><span class="n">clientSocket</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">()));</span>
    <span class="nc">PrintWriter</span> <span class="n">writer</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PrintWriter</span><span class="o">(</span><span class="n">clientSocket</span><span class="o">.</span><span class="na">getOutputStream</span><span class="o">(),</span> <span class="kc">true</span><span class="o">);</span> <span class="c1">// Auto-flush</span>

    <span class="nc">String</span> <span class="n">requestLine</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="na">readLine</span><span class="o">();</span> <span class="c1">// Read the first line (request line)</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Request line: "</span> <span class="o">+</span> <span class="n">requestLine</span><span class="o">);</span>

    <span class="c1">// ... more code to parse headers and handle the request</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<ul>
  <li><strong><code class="highlighter-rouge">BufferedReader</code> and <code class="highlighter-rouge">PrintWriter</code></strong>: Represent input and output streams for reading the client’s request and sending the server’s response.</li>
  <li><strong><code class="highlighter-rouge">reader.readLine()</code></strong>: Reads the first line of the request, typically containing the HTTP method (e.g., GET), URL, and HTTP version.</li>
  <li><strong><code class="highlighter-rouge">System.out.println()</code></strong>: Logs the request line for debugging/monitoring.</li>
</ul>

<h3 id="3-parsing-headers-and-building-response">3. Parsing Headers and Building Response</h3>

<p>Now that our server has established a connection with the client, it’s time to
understand what they’re requesting. Similar to how we need to interpret
different languages to communicate effectively, our server needs to parse the
client’s message, which comes in the form of HTTP headers and a request line. In
this section, we’ll explore the code responsible for translating this “language”
and crafting a tailored response.</p>

<p><strong>Unpacking the Request:</strong></p>

<p>Imagine the client’s message as a letter containing
important information like what resource they want (e.g., a specific webpage)
and any additional instructions. We’ll see how the code carefully extracts this
information from the request line and headers.</p>

<p><strong>Building Blocks of a Response:</strong></p>

<p>Just like crafting a response in our own language, our server needs to assemble
its reply using specific components. We’ll delve into how the code constructs a
well-structured HTTP response, including status codes and content type
information.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
</pre></td><td class="rouge-code"><pre><span class="c1">// ... continue from handleClient</span>

    <span class="nc">String</span> <span class="n">headerLine</span><span class="o">;</span>
    <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">String</span><span class="o">&gt;</span> <span class="n">headers</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">HashMap</span><span class="o">&lt;&gt;();</span> <span class="c1">// Store headers for later use</span>
    <span class="k">while</span> <span class="o">((</span><span class="n">headerLine</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">headerLine</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">())</span> <span class="o">{</span>
        <span class="nc">String</span><span class="o">[]</span> <span class="n">parts</span> <span class="o">=</span> <span class="n">headerLine</span><span class="o">.</span><span class="na">split</span><span class="o">(</span><span class="s">":"</span><span class="o">);</span>
        <span class="n">headers</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">parts</span><span class="o">[</span><span class="mi">0</span><span class="o">].</span><span class="na">trim</span><span class="o">(),</span> <span class="n">parts</span><span class="o">[</span><span class="mi">1</span><span class="o">].</span><span class="na">trim</span><span class="o">());</span>
    <span class="o">}</span>

    <span class="c1">// Extract resource path from request line</span>
    <span class="nc">String</span> <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">requestLine</span><span class="o">.</span><span class="na">split</span><span class="o">(</span><span class="s">" "</span><span class="o">)[</span><span class="mi">1</span><span class="o">];</span> <span class="c1">// Assuming a standard request format</span>

    <span class="c1">// Create a simple response based on the request path</span>
    <span class="nc">String</span> <span class="n">response</span> <span class="o">=</span> <span class="s">"HTTP/1.1 200 OK\r\n"</span> <span class="o">+</span>
                <span class="s">"Content-Type: text/html\r\n"</span> <span class="o">+</span>
                <span class="s">"\r\n"</span> <span class="o">+</span>
                <span class="s">"&lt;h1&gt;Hello, World!&lt;/h1&gt;"</span><span class="o">;</span>

    <span class="kt">byte</span><span class="o">[]</span> <span class="n">responseBytes</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="na">getBytes</span><span class="o">();</span> <span class="c1">// Convert response to byte array</span>
    <span class="n">writer</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">responseBytes</span><span class="o">);</span> <span class="c1">// Send the response</span>

    <span class="n">clientSocket</span><span class="o">.</span><span class="na">close</span><span class="o">();</span> <span class="c1">// Close the client socket</span>
    <span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<ul>
  <li><strong>Headers parsing:</strong>
    <ul>
      <li><code class="highlighter-rouge">while</code> loop reads each header line until an empty line is encountered.</li>
      <li><code class="highlighter-rouge">split</code> method extracts the header name and value.</li>
      <li><code class="highlighter-rouge">HashMap</code> stores headers for potential future use.</li>
    </ul>
  </li>
  <li><strong>Resource path extraction:</strong>
    <ul>
      <li>Uses <code class="highlighter-rouge">split</code> on the request line to extract the requested resource path.</li>
    </ul>
  </li>
  <li><strong>Simple response creation:</strong>
    <ul>
      <li>Hardcoded response includes HTTP status code (200 OK), content type (text/html), and a simple “Hello, World!” message.</li>
      <li><code class="highlighter-rouge">getBytes()</code> converts the response to a byte array for network transmission.</li>
    </ul>
  </li>
  <li><strong>Response sending:</strong>
    <ul>
      <li><code class="highlighter-rouge">writer.write()</code> sends the response bytes to the client.</li>
    </ul>
  </li>
  <li><strong>Socket closing:</strong>
    <ul>
      <li><code class="highlighter-rouge">clientSocket.close()</code> gracefully closes the connection with the client.</li>
    </ul>
  </li>
</ul>

<h3 id="4-serve-static-files-with-socket-programming">4. Serve static files with socket programming</h3>

<p>We can enhance the server to serve static files (e.g., HTML, CSS, images) from a specific directory:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
</pre></td><td class="rouge-code"><pre><span class="kd">private</span> <span class="kd">static</span> <span class="kt">byte</span><span class="o">[]</span> <span class="nf">readFile</span><span class="o">(</span><span class="nc">String</span> <span class="n">filename</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">IOException</span> <span class="o">{</span>
    <span class="nc">File</span> <span class="n">file</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">File</span><span class="o">(</span><span class="n">filename</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(!</span><span class="n">file</span><span class="o">.</span><span class="na">exists</span><span class="o">())</span> <span class="o">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">FileNotFoundException</span><span class="o">(</span><span class="s">"File not found: "</span> <span class="o">+</span> <span class="n">filename</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="nc">FileInputStream</span> <span class="n">fis</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">FileInputStream</span><span class="o">(</span><span class="n">file</span><span class="o">);</span>
    <span class="kt">byte</span><span class="o">[]</span> <span class="n">data</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">byte</span><span class="o">[(</span><span class="kt">int</span><span class="o">)</span> <span class="n">file</span><span class="o">.</span><span class="na">length</span><span class="o">()];</span>
    <span class="n">fis</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="n">data</span><span class="o">);</span>
    <span class="n">fis</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
    <span class="k">return</span> <span class="n">data</span><span class="o">;</span>
<span class="o">}</span>

<span class="kd">private</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">handleClient</span><span class="o">(</span><span class="nc">Socket</span> <span class="n">clientSocket</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">IOException</span> <span class="o">{</span>
    <span class="c1">// ... existing code ...</span>

    <span class="c1">// Map resource path to file path</span>
    <span class="nc">String</span> <span class="n">filePath</span> <span class="o">=</span> <span class="s">"public_html"</span> <span class="o">+</span> <span class="n">resourcePath</span><span class="o">;</span> <span class="c1">// Assuming files are in public_html</span>

    <span class="c1">// Serve the file if it exists</span>
    <span class="k">if</span> <span class="o">(</span><span class="k">new</span> <span class="nc">File</span><span class="o">(</span><span class="n">filePath</span><span class="o">).</span><span class="na">exists</span><span class="o">())</span> <span class="o">{</span>
        <span class="kt">byte</span><span class="o">[]</span> <span class="n">fileBytes</span> <span class="o">=</span> <span class="n">readFile</span><span class="o">(</span><span class="n">filePath</span><span class="o">);</span>
        <span class="nc">String</span> <span class="n">contentType</span> <span class="o">=</span> <span class="n">getContentType</span><span class="o">(</span><span class="n">resourcePath</span><span class="o">);</span> <span class="c1">// Determine content type based on file extension</span>
        <span class="nc">String</span> <span class="n">response</span> <span class="o">=</span> <span class="s">"HTTP/1.1 200 OK\r\n"</span> <span class="o">+</span>
                <span class="s">"Content-Type: "</span> <span class="o">+</span> <span class="n">contentType</span> <span class="o">+</span> <span class="s">"\r\n"</span> <span class="o">+</span>
                <span class="s">"\r\n"</span><span class="o">;</span>
        <span class="kt">byte</span><span class="o">[]</span> <span class="n">responseBytes</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="na">getBytes</span><span class="o">();</span>
        <span class="n">writer</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">responseBytes</span><span class="o">);</span>
        <span class="n">writer</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">fileBytes</span><span class="o">);</span>
    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
        <span class="nc">String</span> <span class="n">response</span> <span class="o">=</span> <span class="s">"HTTP/1.1 404 Not Found\r\n"</span> <span class="o">+</span>
                    <span class="s">"Content-Type: text/plain\r\n"</span> <span class="o">+</span>
                    <span class="s">"\r\n"</span> <span class="o">+</span>
                    <span class="s">"File not found"</span><span class="o">;</span>
        <span class="n">writer</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">response</span><span class="o">.</span><span class="na">getBytes</span><span class="o">());</span>
    <span class="o">}</span>

    <span class="c1">// ... and so on</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<ul>
  <li><strong><code class="highlighter-rouge">readFile</code> method:</strong> Reads the contents of a specified file into a byte array.</li>
  <li><strong><code class="highlighter-rouge">handleClient</code> modification:</strong>
    <ul>
      <li>Maps the requested resource path to a file path assuming files are in a <code class="highlighter-rouge">public_html</code> directory.</li>
      <li>Checks if the file exists.</li>
      <li>If found, reads the file content and determines the content type based on the extension.</li>
      <li>Constructs a response with the appropriate content type and file data.</li>
      <li>Sends the response to the client.</li>
      <li>Handles cases where the file is not found (e.g., sending a 404 Not Found response).</li>
    </ul>
  </li>
</ul>

<h3 id="5-error-handling-and-enhancements">5. Error Handling and Enhancements</h3>

<ul>
  <li>Implement additional error handling for various scenarios (e.g., invalid requests, socket exceptions).</li>
  <li>Consider supporting more HTTP methods (e.g., POST).</li>
  <li>Explore advanced features like serving dynamic content using servlets or frameworks.</li>
</ul>

<h2 id="full-code-for-simple-http-web-server-in-java-with-socket-programming">Full code for Simple HTTP Web Server in Java with socket programming:</h2>

<p><strong>Here’s the full integrated code, incorporating the optional section for serving static files:</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
</pre></td><td class="rouge-code"><pre><span class="kn">import</span> <span class="nn">java.io.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.HashMap</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SimpleHTTPServer</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="no">PORT</span> <span class="o">=</span> <span class="mi">8080</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">IOException</span> <span class="o">{</span>
        <span class="nc">ServerSocket</span> <span class="n">serverSocket</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ServerSocket</span><span class="o">(</span><span class="no">PORT</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Server started on port "</span> <span class="o">+</span> <span class="no">PORT</span><span class="o">);</span>

        <span class="k">while</span> <span class="o">(</span><span class="kc">true</span><span class="o">)</span> <span class="o">{</span>
            <span class="nc">Socket</span> <span class="n">clientSocket</span> <span class="o">=</span> <span class="n">serverSocket</span><span class="o">.</span><span class="na">accept</span><span class="o">();</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Client connected: "</span> <span class="o">+</span> <span class="n">clientSocket</span><span class="o">.</span><span class="na">getInetAddress</span><span class="o">());</span>
            <span class="n">handleClient</span><span class="o">(</span><span class="n">clientSocket</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">handleClient</span><span class="o">(</span><span class="nc">Socket</span> <span class="n">clientSocket</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">IOException</span> <span class="o">{</span>
        <span class="nc">BufferedReader</span> <span class="n">reader</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="nc">InputStreamReader</span><span class="o">(</span><span class="n">clientSocket</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">()));</span>
        <span class="nc">PrintWriter</span> <span class="n">writer</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PrintWriter</span><span class="o">(</span><span class="n">clientSocket</span><span class="o">.</span><span class="na">getOutputStream</span><span class="o">(),</span> <span class="kc">true</span><span class="o">);</span>

        <span class="nc">String</span> <span class="n">requestLine</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="na">readLine</span><span class="o">();</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Request line: "</span> <span class="o">+</span> <span class="n">requestLine</span><span class="o">);</span>

        <span class="nc">String</span> <span class="n">headerLine</span><span class="o">;</span>
        <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">String</span><span class="o">&gt;</span> <span class="n">headers</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">HashMap</span><span class="o">&lt;&gt;();</span>
        <span class="k">while</span> <span class="o">((</span><span class="n">headerLine</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">headerLine</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">())</span> <span class="o">{</span>
            <span class="nc">String</span><span class="o">[]</span> <span class="n">parts</span> <span class="o">=</span> <span class="n">headerLine</span><span class="o">.</span><span class="na">split</span><span class="o">(</span><span class="s">":"</span><span class="o">);</span>
            <span class="n">headers</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">parts</span><span class="o">[</span><span class="mi">0</span><span class="o">].</span><span class="na">trim</span><span class="o">(),</span> <span class="n">parts</span><span class="o">[</span><span class="mi">1</span><span class="o">].</span><span class="na">trim</span><span class="o">());</span>
        <span class="o">}</span>

        <span class="nc">String</span> <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">requestLine</span><span class="o">.</span><span class="na">split</span><span class="o">(</span><span class="s">" "</span><span class="o">)[</span><span class="mi">1</span><span class="o">];</span>

        <span class="c1">// Serve static files if requested</span>
        <span class="nc">String</span> <span class="n">filePath</span> <span class="o">=</span> <span class="s">"public_html"</span> <span class="o">+</span> <span class="n">resourcePath</span><span class="o">;</span> <span class="c1">// Assuming files are in public_html</span>
        <span class="k">if</span> <span class="o">(</span><span class="k">new</span> <span class="nc">File</span><span class="o">(</span><span class="n">filePath</span><span class="o">).</span><span class="na">exists</span><span class="o">())</span> <span class="o">{</span>
            <span class="kt">byte</span><span class="o">[]</span> <span class="n">fileBytes</span> <span class="o">=</span> <span class="n">readFile</span><span class="o">(</span><span class="n">filePath</span><span class="o">);</span>
            <span class="nc">String</span> <span class="n">contentType</span> <span class="o">=</span> <span class="n">getContentType</span><span class="o">(</span><span class="n">resourcePath</span><span class="o">);</span>
            <span class="nc">String</span> <span class="n">response</span> <span class="o">=</span> <span class="s">"HTTP/1.1 200 OK\r\n"</span> <span class="o">+</span>
                    <span class="s">"Content-Type: "</span> <span class="o">+</span> <span class="n">contentType</span> <span class="o">+</span> <span class="s">"\r\n"</span> <span class="o">+</span>
                    <span class="s">"\r\n"</span><span class="o">;</span>
            <span class="kt">byte</span><span class="o">[]</span> <span class="n">responseBytes</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="na">getBytes</span><span class="o">();</span>
            <span class="n">writer</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">responseBytes</span><span class="o">);</span>
            <span class="n">writer</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">fileBytes</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="nc">String</span> <span class="n">response</span> <span class="o">=</span> <span class="s">"HTTP/1.1 404 Not Found\r\n"</span> <span class="o">+</span>
                    <span class="s">"Content-Type: text/plain\r\n"</span> <span class="o">+</span>
                    <span class="s">"\r\n"</span> <span class="o">+</span>
                    <span class="s">"File not found"</span><span class="o">;</span>
            <span class="n">writer</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">response</span><span class="o">.</span><span class="na">getBytes</span><span class="o">());</span>
        <span class="o">}</span>

        <span class="n">clientSocket</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kt">byte</span><span class="o">[]</span> <span class="nf">readFile</span><span class="o">(</span><span class="nc">String</span> <span class="n">filename</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">IOException</span> <span class="o">{</span>
        <span class="nc">File</span> <span class="n">file</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">File</span><span class="o">(</span><span class="n">filename</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(!</span><span class="n">file</span><span class="o">.</span><span class="na">exists</span><span class="o">())</span> <span class="o">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">FileNotFoundException</span><span class="o">(</span><span class="s">"File not found: "</span> <span class="o">+</span> <span class="n">filename</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="nc">FileInputStream</span> <span class="n">fis</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">FileInputStream</span><span class="o">(</span><span class="n">file</span><span class="o">);</span>
        <span class="kt">byte</span><span class="o">[]</span> <span class="n">data</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">byte</span><span class="o">[(</span><span class="kt">int</span><span class="o">)</span> <span class="n">file</span><span class="o">.</span><span class="na">length</span><span class="o">()];</span>
        <span class="n">fis</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="n">data</span><span class="o">);</span>
        <span class="n">fis</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="k">return</span> <span class="n">data</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="nc">String</span> <span class="nf">getContentType</span><span class="o">(</span><span class="nc">String</span> <span class="n">resourcePath</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">fileName</span><span class="o">.</span><span class="na">endsWith</span><span class="o">(</span><span class="s">"html"</span><span class="o">))</span> <span class="o">{</span>
            <span class="k">return</span> <span class="o">(</span><span class="s">"text/html"</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">fileName</span><span class="o">.</span><span class="na">endsWith</span><span class="o">(</span><span class="s">"jpg"</span><span class="o">))</span> <span class="o">{</span>
            <span class="k">return</span> <span class="o">(</span><span class="s">"image/jpg"</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">fileName</span><span class="o">.</span><span class="na">endsWith</span><span class="o">(</span><span class="s">"jpeg"</span><span class="o">))</span> <span class="o">{</span>
            <span class="k">return</span> <span class="o">(</span><span class="s">"image/jpeg"</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">fileName</span><span class="o">.</span><span class="na">endsWith</span><span class="o">(</span><span class="s">"gif"</span><span class="o">))</span> <span class="o">{</span>
            <span class="k">return</span> <span class="o">(</span><span class="s">"image/gif"</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="k">return</span> <span class="o">(</span><span class="s">"application/octet-stream"</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="simple-http-server-with-multiple-clients-in-java-socket-programming">Simple Http server with multiple clients in Java socket programming</h2>

<p>The main difference between the single-client and multi-client versions of the HTTP server code lies in how they handle incoming client connections and process requests:</p>

<h3 id="single-client">Single-Client:</h3>

<ul>
  <li>The server listens for connections on a specific port.</li>
  <li>When a client connects, the server accepts the connection and establishes a communication channel.</li>
  <li>The server reads the client’s request, processes it, and sends a response.</li>
  <li>After sending the response, the server closes the connection and waits for the next client.</li>
</ul>

<h3 id="multi-client-with-threads">Multi-Client (with threads):</h3>

<ul>
  <li>The server still listens for connections on a specific port.</li>
  <li>When a client connects, the server accepts the connection and establishes a communication channel.</li>
  <li>Instead of directly processing the request itself, the server creates a new thread dedicated to handling that specific client.</li>
  <li>This thread reads the client’s request, processes it, and sends a response.</li>
  <li>After sending the response, the thread closes the connection associated with that client.</li>
  <li>Meanwhile, the main server loop continues listening for new client connections and creating new threads to handle them concurrently.</li>
</ul>

<p>Here is the full working code:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
</pre></td><td class="rouge-code"><pre><span class="kn">import</span> <span class="nn">java.io.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.HashMap</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MultiClientHTTPServer</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="no">PORT</span> <span class="o">=</span> <span class="mi">8080</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">IOException</span> <span class="o">{</span>
        <span class="nc">ServerSocket</span> <span class="n">serverSocket</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ServerSocket</span><span class="o">(</span><span class="no">PORT</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Server started on port "</span> <span class="o">+</span> <span class="no">PORT</span><span class="o">);</span>

        <span class="k">while</span> <span class="o">(</span><span class="kc">true</span><span class="o">)</span> <span class="o">{</span>
            <span class="nc">Socket</span> <span class="n">clientSocket</span> <span class="o">=</span> <span class="n">serverSocket</span><span class="o">.</span><span class="na">accept</span><span class="o">();</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Client connected: "</span> <span class="o">+</span> <span class="n">clientSocket</span><span class="o">.</span><span class="na">getInetAddress</span><span class="o">());</span>

            <span class="c1">// Handle client in a separate thread to allow for multiple connections</span>
            <span class="c1">// THIS IS THE MAIN DIFFERENCE BETWEN SINGLE CLIENT AND MULTIPLE CLIENTS</span>
            <span class="k">new</span> <span class="nf">Thread</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                <span class="k">try</span> <span class="o">{</span>
                    <span class="n">handleClient</span><span class="o">(</span><span class="n">clientSocket</span><span class="o">);</span>
                <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
                <span class="o">}</span>
            <span class="o">}).</span><span class="na">start</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">handleClient</span><span class="o">(</span><span class="nc">Socket</span> <span class="n">clientSocket</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">IOException</span> <span class="o">{</span>
        <span class="nc">BufferedReader</span> <span class="n">reader</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="nc">InputStreamReader</span><span class="o">(</span><span class="n">clientSocket</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">()));</span>
        <span class="nc">PrintWriter</span> <span class="n">writer</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PrintWriter</span><span class="o">(</span><span class="n">clientSocket</span><span class="o">.</span><span class="na">getOutputStream</span><span class="o">(),</span> <span class="kc">true</span><span class="o">);</span>

        <span class="nc">String</span> <span class="n">requestLine</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="na">readLine</span><span class="o">();</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Request line: "</span> <span class="o">+</span> <span class="n">requestLine</span><span class="o">);</span>

        <span class="nc">String</span> <span class="n">headerLine</span><span class="o">;</span>
        <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">String</span><span class="o">&gt;</span> <span class="n">headers</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">HashMap</span><span class="o">&lt;&gt;();</span>
        <span class="k">while</span> <span class="o">((</span><span class="n">headerLine</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">headerLine</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">())</span> <span class="o">{</span>
            <span class="nc">String</span><span class="o">[]</span> <span class="n">parts</span> <span class="o">=</span> <span class="n">headerLine</span><span class="o">.</span><span class="na">split</span><span class="o">(</span><span class="s">":"</span><span class="o">);</span>
            <span class="n">headers</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">parts</span><span class="o">[</span><span class="mi">0</span><span class="o">].</span><span class="na">trim</span><span class="o">(),</span> <span class="n">parts</span><span class="o">[</span><span class="mi">1</span><span class="o">].</span><span class="na">trim</span><span class="o">());</span>
        <span class="o">}</span>

        <span class="nc">String</span> <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">requestLine</span><span class="o">.</span><span class="na">split</span><span class="o">(</span><span class="s">" "</span><span class="o">)[</span><span class="mi">1</span><span class="o">];</span>

        <span class="c1">// Serve static files if requested</span>
        <span class="nc">String</span> <span class="n">filePath</span> <span class="o">=</span> <span class="s">"public_html"</span> <span class="o">+</span> <span class="n">resourcePath</span><span class="o">;</span> <span class="c1">// Assuming files are in public_html</span>
        <span class="k">if</span> <span class="o">(</span><span class="k">new</span> <span class="nc">File</span><span class="o">(</span><span class="n">filePath</span><span class="o">).</span><span class="na">exists</span><span class="o">())</span> <span class="o">{</span>
            <span class="kt">byte</span><span class="o">[]</span> <span class="n">fileBytes</span> <span class="o">=</span> <span class="n">readFile</span><span class="o">(</span><span class="n">filePath</span><span class="o">);</span>
            <span class="nc">String</span> <span class="n">contentType</span> <span class="o">=</span> <span class="n">getContentType</span><span class="o">(</span><span class="n">resourcePath</span><span class="o">);</span>
            <span class="nc">String</span> <span class="n">response</span> <span class="o">=</span> <span class="s">"HTTP/1.1 200 OK\r\n"</span> <span class="o">+</span>
                    <span class="s">"Content-Type: "</span> <span class="o">+</span> <span class="n">contentType</span> <span class="o">+</span> <span class="s">"\r\n"</span> <span class="o">+</span>
                    <span class="s">"\r\n"</span><span class="o">;</span>
            <span class="kt">byte</span><span class="o">[]</span> <span class="n">responseBytes</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="na">getBytes</span><span class="o">();</span>
            <span class="n">writer</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">responseBytes</span><span class="o">);</span>
            <span class="n">writer</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">fileBytes</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="c1">// Handle file not found case (e.g., 404 Not Found response)</span>
            <span class="nc">String</span> <span class="n">response</span> <span class="o">=</span> <span class="s">"HTTP/1.1 404 Not Found\r\n"</span> <span class="o">+</span>
                    <span class="s">"Content-Type: text/plain\r\n"</span> <span class="o">+</span>
                    <span class="s">"\r\n"</span> <span class="o">+</span>
                    <span class="s">"File not found"</span><span class="o">;</span>
            <span class="n">writer</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">response</span><span class="o">.</span><span class="na">getBytes</span><span class="o">());</span>
        <span class="o">}</span>

        <span class="n">clientSocket</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kt">byte</span><span class="o">[]</span> <span class="nf">readFile</span><span class="o">(</span><span class="nc">String</span> <span class="n">filename</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">IOException</span> <span class="o">{</span>
        <span class="nc">File</span> <span class="n">file</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">File</span><span class="o">(</span><span class="n">filename</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(!</span><span class="n">file</span><span class="o">.</span><span class="na">exists</span><span class="o">())</span> <span class="o">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">FileNotFoundException</span><span class="o">(</span><span class="s">"File not found: "</span> <span class="o">+</span> <span class="n">filename</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="nc">FileInputStream</span> <span class="n">fis</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">FileInputStream</span><span class="o">(</span><span class="n">file</span><span class="o">);</span>
        <span class="kt">byte</span><span class="o">[]</span> <span class="n">data</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">byte</span><span class="o">[(</span><span class="kt">int</span><span class="o">)</span> <span class="n">file</span><span class="o">.</span><span class="na">length</span><span class="o">()];</span>
        <span class="n">fis</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="n">data</span><span class="o">);</span>
        <span class="n">fis</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="k">return</span> <span class="n">data</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="nc">String</span> <span class="nf">getContentType</span><span class="o">(</span><span class="nc">String</span> <span class="n">resourcePath</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">fileName</span><span class="o">.</span><span class="na">endsWith</span><span class="o">(</span><span class="s">"html"</span><span class="o">))</span> <span class="o">{</span>
            <span class="k">return</span> <span class="o">(</span><span class="s">"text/html"</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">fileName</span><span class="o">.</span><span class="na">endsWith</span><span class="o">(</span><span class="s">"jpg"</span><span class="o">))</span> <span class="o">{</span>
            <span class="k">return</span> <span class="o">(</span><span class="s">"image/jpg"</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">fileName</span><span class="o">.</span><span class="na">endsWith</span><span class="o">(</span><span class="s">"jpeg"</span><span class="o">))</span> <span class="o">{</span>
            <span class="k">return</span> <span class="o">(</span><span class="s">"image/jpeg"</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">fileName</span><span class="o">.</span><span class="na">endsWith</span><span class="o">(</span><span class="s">"gif"</span><span class="o">))</span> <span class="o">{</span>
            <span class="k">return</span> <span class="o">(</span><span class="s">"image/gif"</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="k">return</span> <span class="o">(</span><span class="s">"application/octet-stream"</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="key-differences-in-code">Key Differences in Code:</h3>

<ul>
  <li><strong><code class="highlighter-rouge">while (true)</code> loop:</strong> Both versions have this loop to continuously listen for connections.</li>
  <li><strong><code class="highlighter-rouge">clientSocket.accept()</code>:</strong> Both versions use this line to accept incoming connections.</li>
  <li><strong>Handling:</strong> In the single-client version, the code directly processes the request within the <code class="highlighter-rouge">while (true)</code> loop. In the multi-client version, it creates a new thread using <code class="highlighter-rouge">new Thread(() -&gt; {...}).start()</code>, where the actual request handling happens.</li>
  <li><strong>Closing connection:</strong> Both versions close the connection after sending the response, but in the multi-client version, this happens within the dedicated thread for each client.</li>
</ul>

<h2 id="heres-a-guide-on-running-the-code-and-connecting-a-client">Here’s a guide on running the code and connecting a client</h2>

<h3 id="1-compile-the-code">1. Compile the Code:</h3>

<ul>
  <li>Ensure you have Java Development Kit (JDK) installed on your system.</li>
  <li>Open a terminal or command prompt in the directory where you’ve saved the Java code file (e.g., <code class="highlighter-rouge">MultiClientHTTPServer.java</code>).</li>
  <li>Use the <code class="highlighter-rouge">javac</code> command to compile the code:</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>javac MultiClientHTTPServer.java
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="2-run-the-server">2. Run the Server:</h3>

<ul>
  <li>After successful compilation, use the <code class="highlighter-rouge">java</code> command to run the compiled class file:</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>java MultiClientHTTPServer
</pre></td></tr></tbody></table></code></pre></div></div>

<ul>
  <li>You should see a message in the terminal indicating the server has started and is listening on the specified port (usually 8080).</li>
</ul>

<h3 id="3-connect-a-client">3. Connect a Client:</h3>

<h4 id="option-1-connect-with-web-browser">Option 1: Connect with web browser:</h4>

<ul>
  <li>Open a web browser on your machine or any other device on the same network as the server.</li>
  <li>In the address bar, enter the following URL:</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>http://localhost:8080
</pre></td></tr></tbody></table></code></pre></div></div>

<ul>
  <li>Replace <code class="highlighter-rouge">localhost</code> with the server’s IP address if accessing from a different device.</li>
  <li>If the server is running correctly and able to serve static files, you should see the contents of the <code class="highlighter-rouge">public_html</code> directory displayed in your browser.</li>
</ul>

<p><strong>Additional Notes:</strong></p>

<ul>
  <li><strong>Serving Files:</strong> Ensure you have a directory named <code class="highlighter-rouge">public_html</code> in the same location as your Java class file to serve static files. Place any HTML, CSS, images, or other files you want to access within this directory.</li>
  <li><strong>Custom Port:</strong> If you want to use a different port, change the <code class="highlighter-rouge">PORT</code> variable in the code to your desired port number.</li>
  <li><strong>Accessing from Other Devices:</strong> To access the server from devices on the same network, use the server’s IP address instead of <code class="highlighter-rouge">localhost</code> in the URL.</li>
  <li><strong>Troubleshooting:</strong> If you encounter issues, double-check for any typos in the code, ensure the server is running on the correct port, and verify that your firewall isn’t blocking incoming connections.</li>
</ul>

<h4 id="option-2-connect-with-simple-http-java-client">Option 2: Connect with Simple HTTP Java Client</h4>

<p><strong>Here’s a simple Java client code that can connect to the HTTP server and retrieve content:</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
</pre></td><td class="rouge-code"><pre><span class="kn">import</span> <span class="nn">java.io.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.Socket</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">HTTPClient</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">IOException</span> <span class="o">{</span>
        <span class="nc">String</span> <span class="n">host</span> <span class="o">=</span> <span class="s">"localhost"</span><span class="o">;</span> <span class="c1">// Change to server's IP if needed</span>
        <span class="kt">int</span> <span class="n">port</span> <span class="o">=</span> <span class="mi">8080</span><span class="o">;</span> <span class="c1">// Change to server's port if needed</span>
        <span class="nc">String</span> <span class="n">resource</span> <span class="o">=</span> <span class="s">"/"</span><span class="o">;</span> <span class="c1">// Resource to request (e.g., "/index.html")</span>

        <span class="k">try</span> <span class="o">(</span><span class="nc">Socket</span> <span class="n">clientSocket</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Socket</span><span class="o">(</span><span class="n">host</span><span class="o">,</span> <span class="n">port</span><span class="o">))</span> <span class="o">{</span>
            <span class="nc">PrintWriter</span> <span class="n">writer</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PrintWriter</span><span class="o">(</span><span class="n">clientSocket</span><span class="o">.</span><span class="na">getOutputStream</span><span class="o">(),</span> <span class="kc">true</span><span class="o">);</span>
            <span class="nc">BufferedReader</span> <span class="n">reader</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="nc">InputStreamReader</span><span class="o">(</span><span class="n">clientSocket</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">()));</span>

            <span class="c1">// Send HTTP GET request</span>
            <span class="n">writer</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"GET "</span> <span class="o">+</span> <span class="n">resource</span> <span class="o">+</span> <span class="s">" HTTP/1.1"</span><span class="o">);</span>
            <span class="n">writer</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Host: "</span> <span class="o">+</span> <span class="n">host</span><span class="o">);</span>
            <span class="n">writer</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Connection: close"</span><span class="o">);</span>
            <span class="n">writer</span><span class="o">.</span><span class="na">println</span><span class="o">();</span>

            <span class="c1">// Read response from server</span>
            <span class="nc">String</span> <span class="n">line</span><span class="o">;</span>
            <span class="k">while</span> <span class="o">((</span><span class="n">line</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">line</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><strong>To run this client code:</strong></p>

<ol>
  <li>Save it as a Java file (e.g., <code class="highlighter-rouge">HTTPClient.java</code>).</li>
  <li>Compile it using <code class="highlighter-rouge">javac HTTPClient.java</code>.</li>
  <li>Run it using <code class="highlighter-rouge">java HTTPClient</code>.</li>
</ol>

<p><strong>Key Points:</strong></p>

<ul>
  <li>It establishes a connection with the server using the specified host and port.</li>
  <li>It sends an HTTP GET request for the desired resource.</li>
  <li>It receives the server’s response and prints it to the console.</li>
  <li>You can modify the <code class="highlighter-rouge">host</code>, <code class="highlighter-rouge">port</code>, and <code class="highlighter-rouge">resource</code> variables to connect to different servers and request different resources.</li>
</ul>

<h3 id="benefits-of-multi-client">Benefits of Multi-Client:</h3>

<ul>
  <li><strong>Scalability:</strong> The multi-client version can handle multiple requests simultaneously, improving its ability to serve more clients efficiently.</li>
  <li><strong>Responsiveness:</strong> By using threads, the server can remain responsive to new clients even while handling existing requests.</li>
  <li><strong>Efficiency:</strong> Threads allow the server to utilize system resources more effectively compared to a single-threaded approach.</li>
</ul>

<h3 id="things-to-remember">Things to Remember:</h3>

<ul>
  <li>Implementing multi-threading introduces its own complexities and requires careful handling to avoid concurrency issues.</li>
  <li>The single-client version is simpler to understand and implement but may not be suitable for real-world scenarios with high traffic.</li>
</ul>

<h2 id="conclusion">Conclusion</h2>

<p>Congratulations! You’ve built a basic HTTP server with single and multiple
clients in Java, venturing into the realm of network programming. Remember, this
is just the beginning. The internet awaits your further explorations!</p>

<ul>
  <li>This is a simplified example for educational purposes. A production-ready
server would have robust error handling, security measures, and more features.</li>
  <li>Always follow responsible development practices and avoid using your server
for malicious purposes.</li>
  <li>Explore real-world HTTP servers and frameworks to gain deeper insights into
web development.</li>
</ul>

<p>I hope this comprehensive blog post empowers you to embark on your own adventures in socket programming and web development!
If you enjoyed this post, we encourage you to share it with your friends and
followers on social media and following us on twitter <a href="https://twitter.com/thetipseason">@thetipseason</a></p>

            </div>


            <!-- Post promotion -->
            
            <!-- End of Post promotion -->


            <!-- Suggested Reads -->
            


            <!-- Rating -->
            

            <hr>

            <!-- Post Date -->
            <p>
            <small>
                <span class="post-date"><time class="post-date" datetime="2024-02-04">04 Feb 2024</time></span>
                
                </small>
            </p>

            <!-- Post Categories -->
            <div class="after-post-cats">
                <ul class="tags mb-4">
                    
                    
                    <li>
                        <a class="smoothscroll" href="/categories#Java">Java</a>
                    </li>
                    
                    <li>
                        <a class="smoothscroll" href="/categories#Programming">Programming</a>
                    </li>
                    
                </ul>
            </div>
            <!-- End Categories -->

            <!-- Post Tags -->
            <div class="after-post-tags">
                <ul class="tags">
                    
                    
                </ul>
            </div>
            <!-- End Tags -->

            <!-- Prev/Next -->
            <div class="row PageNavigation d-flex justify-content-between font-weight-bold">
            
            <a class="prev d-block col-md-6" href="/bard-prompts-for-images/"> &laquo; 150+ Google Gemini prompts for image generation - Bard prompts for AI Art</a>
            
            
            <a class="next d-block col-md-6 text-lg-right" href="/google-bard-ai-guide/">200+ Google Gemini prompts in 20+ categories with prompt techniques &raquo; </a>
            
            <div class="clearfix"></div>
            </div>
            <!-- End Categories -->

        </div>
        <!-- End Post -->

    </div>
</div>
<!-- End Article
================================================== -->

<!-- Begin Comments
================================================== -->

    <div class="container">
        <div id="comments" class="row justify-content-center mb-5">
            <div class="col-md-8">
                <section class="disqus">
    <div id="disqus_thread"></div>
  <!--  <script type="text/javascript">
        var disqus_shortname = 'tipseason'; 
        var disqus_developer = 0;
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = window.location.protocol + '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>-->
</section>

            </div>
        </div>
    </div>

<!--End Comments
================================================== -->

<!-- Review with LD-JSON, adapt it for your needs if you like, but make sure you test the generated HTML source code first: 
https://search.google.com/structured-data/testing-tool/u/0/
================================================== -->
<!--

        </div>


        

    </div>

    <!-- Categories Jumbotron
    ================================================== -->
    <div class="jumbotron fortags">
        <div class="d-md-flex h-100">
            <div class="col-md-4 transpdark align-self-center text-center h-100">
                <div class="d-md-flex align-items-center justify-content-center h-100">
                    <h2 class="d-md-block align-self-center py-1 font-weight-light">Explore <span
                            class="d-none d-md-inline">→</span></h2>
                </div>
            </div>
            <div class="col-md-8 p-5 align-self-center text-center">
                
                
                
                <a class="mt-1 mb-1"
                   href="/categories#Interviews">Interviews (19)</a>
                
                <a class="mt-1 mb-1"
                   href="/categories#Java">Java (4)</a>
                
                <a class="mt-1 mb-1"
                   href="/categories#Markdown">Markdown (1)</a>
                
                <a class="mt-1 mb-1"
                   href="/categories#Database">Database (2)</a>
                
                <a class="mt-1 mb-1"
                   href="/categories#MySQL">MySQL (2)</a>
                
                <a class="mt-1 mb-1"
                   href="/categories#PostgreSQL">PostgreSQL (4)</a>
                
                <a class="mt-1 mb-1"
                   href="/categories#DataScience">DataScience (3)</a>
                
                <a class="mt-1 mb-1"
                   href="/categories#Carbon">Carbon (6)</a>
                
                <a class="mt-1 mb-1"
                   href="/categories#Programming">Programming (4)</a>
                
                <a class="mt-1 mb-1"
                   href="/categories#Events">Events (1)</a>
                
                <a class="mt-1 mb-1"
                   href="/categories#Behavioral">Behavioral (5)</a>
                
                <a class="mt-1 mb-1"
                   href="/categories#Resume">Resume (1)</a>
                
                <a class="mt-1 mb-1"
                   href="/categories#Golang">Golang (7)</a>
                
                <a class="mt-1 mb-1"
                   href="/categories#ChatGPT">ChatGPT (24)</a>
                
                <a class="mt-1 mb-1"
                   href="/categories#Midjourney">Midjourney (22)</a>
                
                <a class="mt-1 mb-1"
                   href="/categories#Writing">Writing (1)</a>
                
                <a class="mt-1 mb-1"
                   href="/categories#BardAI">BardAI (4)</a>
                
                <a class="mt-1 mb-1"
                   href="/categories#Gemini">Gemini (3)</a>
                
                <a class="mt-1 mb-1"
                   href="/categories#DALLE-2">DALLE-2 (1)</a>
                
                <a class="mt-1 mb-1"
                   href="/categories#SQL">SQL (2)</a>
                
                <a class="mt-1 mb-1"
                   href="/categories#Software-Engineer">Software Engineer (2)</a>
                
                
                
            </div>
        </div>
    </div>

    <!-- Begin Footer
    ================================================== -->
    <footer class="footer">
        <div class="container">
            <div class="row">
                <div class="col-md-3 col-sm-3 text-center text-lg-left">
                    <a href="#">Copyright © 2024 Tip Season</a>
                </div>

                <div class="col-md-2 col-sm-2 text-center text-lg-left">
                    <a href="/privacy.html">Privacy Policy</a>
                </div>

                <div class="col-md-2 col-sm-2 text-center text-lg-left">
                    <a href="/termsandconditions" rel="noopener noreferrer nofollow">Terms & Conditions</a>
                </div>


                <!--            <div class="col-md-6 col-sm-6 text-center text-lg-right">    -->
                <!--                <a target="_blank" href="https://www.wowthemes.net/mediumish-free-jekyll-template/">Mediumish Jekyll Theme</a> by WowThemes.net-->
                <!--            </div>-->
            </div>
        </div>


    </footer>
    <!-- End Footer
    ================================================== -->

</div> <!-- /.site-content -->

<!-- Scripts
================================================== -->

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js"
        integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut"
        crossorigin="anonymous"></script>

<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js"
        integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k"
        crossorigin="anonymous"></script>

<script src="/assets/js/mediumish.js"></script>



<script src="/assets/js/ie10-viewport-bug-workaround.js"></script>


<script id="dsq-count-scr" src="//tipseason.disqus.com/count.js"></script>


</body>
</html>
